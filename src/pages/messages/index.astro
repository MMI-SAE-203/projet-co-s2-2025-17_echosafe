---
import PocketBase from "pocketbase";

// Authentification et redirection
const pb = new PocketBase("https://echosafe.eloishenry.fr");
const authCookie = Astro.request.headers.get("cookie");
if (authCookie) {
  pb.authStore.loadFromCookie(authCookie);
}

if (!pb.authStore.isValid) {
  return Astro.redirect("/auth/connexion");
}

// Redirection automatique vers les messages priv√©s
return Astro.redirect("/messages/prives");
---
